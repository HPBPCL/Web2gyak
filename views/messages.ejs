<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="utf-8" />
    <title>Beérkezett Üzenetek</title>
    <base href="<%= typeof basePath !== 'undefined' ? basePath : '' %>/">
    <link href="css/styles.css" rel="stylesheet" />
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <style>
        .msg-container { margin-top: 50px; margin-bottom: 50px; }
        .table-responsive { box-shadow: 0 0 20px rgba(0,0,0,0.1); border-radius: 10px; overflow: hidden; }
        h1 { text-align: center; margin-bottom: 30px; color: #333; }
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-light" id="mainNav">
        <div class="container px-4 px-lg-5">
            <a class="navbar-brand" href="<%= basePath %>/">NB1 Stats</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav ms-auto py-4 py-lg-0">
                    <li class="nav-item"><a class="nav-link" href="<%= basePath %>/">Főoldal</a></li>
                    <li class="nav-item"><a class="nav-link" href="<%= basePath %>/logout">Kijelentkezés</a></li>
                </ul>
            </div>
        </div>
    </nav>
    <header class="masthead" style="background-image: url('assets/img/about-bg.jpg'); height: 300px;">
        <div class="container position-relative px-4 px-lg-5">
            <div class="row gx-4 gx-lg-5 justify-content-center">
                <div class="col-md-10 col-lg-8 col-xl-7">
                    <div class="site-heading" style="padding-top: 100px;">
                        <h1>Üzenetek</h1>
                        <span class="subheading">A látogatók visszajelzései</span>
                    </div>
                </div>
            </div>
        </div>
    </header>
    <div class="container msg-container">
        <% if (typeof messages !== 'undefined' && messages.length > 0) { %>
            <div class="table-responsive">
                <table class="table table-striped table-hover mb-0">
                    <thead class="table-dark">
                        <tr>
                            <th scope="col">Dátum</th>
                            <th scope="col">Küldő Neve</th>
                            <th scope="col">Email Cím</th>
                            <th scope="col">Üzenet</th>
                        </tr>
                    </thead>
                    <tbody>
                        <% messages.forEach(function(msg) { %>
                            <tr>
                                <td style="white-space: nowrap;"><%= new Date(msg.datum).toLocaleString('hu-HU') %></td>
                                <td><strong><%= msg.nev %></strong></td>
                                <td><a href="mailto:<%= msg.email %>"><%= msg.email %></a></td>
                                <td><%= msg.uzenet %></td>
                            </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        <% } else { %>
            <div class="alert alert-info text-center"><h4>Nincs megjeleníthető üzenet az adatbázisban.</h4></div>
        <% } %>
    </div>
    <footer class="border-top mt-auto">
        <div class="container px-4 px-lg-5"><div class="small text-center text-muted fst-italic">Copyright &copy; NB1 Statisztika Kft. 2024</div></div>
    </footer>
</body>
</html>